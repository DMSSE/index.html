// ===== Navigation Smooth Scrolling =====
function scrollToSection(sectionId) {
    const element = document.getElementById(sectionId);
    if (element) {
        element.scrollIntoView({ behavior: 'smooth' });
    }
}

// ===== AI Chatbot Functionality =====
const knowledgeBase = {
    "أهم إنجازات الفراعنة": `أهم إنجازات الحضارة الفرعونية:<br><br>
🏛️ <strong>الهندسة والعمارة:</strong><br>
- بناء الأهرامات الثلاثة وأبو الهول (2560 ق.م)<br>
- الهرم الأكبر يحتوي على 2.3 مليون كتلة حجرية<br>
- دقة هندسية مذهلة في المحاذاة الفلكية<br><br>
🏥 <strong>الطب والجراحة:</strong><br>
- أول من استخدم المشارط ومثاقب الأسنان المعدنية<br>
- بردية إدوين سميث توثق 48 حالة جراحية<br>
- بردية إيبرس تحتوي على 700+ وصفة طبية<br><br>
📊 <strong>الرياضيات والفلك:</strong><br>
- اختراع التقويم الشمسي 365 يوماً<br>
- نظام الكسور العشرية<br>
- دوائر نبتا بلايا الفلكية (5000 ق.م)<br><br>
✍️ <strong>الكتابة والأدب:</strong><br>
- الهيروغليفية من أقدم أنظمة الكتابة (3200 ق.م)<br>
- اختراع ورق البردي (3000 ق.م)<br>
- أقدم السجلات الإدارية المكتوبة`,
    "بناء الأهرامات": `كيف بنيت الأهرامات؟<br><br>
🔍 <strong>الدلائل العلمية:</strong><br>
- يوميات "ميرر" (عامل في عهد خوفو) توثق نقل الأحجار عبر النيل<br>
- استخدموا منحدرات رملية وزلاجات خشبية<br>
- عمال مهرة (ليسوا عبيداً) بنوها خلال موسم الفيضان<br><br>
📏 <strong>الحقائق:</strong><br>
- الهرم الأكبر: 146 متراً (الارتفاع الأصلي)<br>
- 2.3 مليون كتلة حجرية<br>
- متوسط وزن الكتلة: 2.5 طن<br>
- زمن البناء: حوالي 20 عاماً<br>
- دقة المحاذاة: خطأ أقل من 4 دقائق قوسية<br><br>
🛠️ <strong>التقنيات:</strong><br>
- استخدام الأدوات النحاسية والحجرية<br>
- الاستفادة من فيضان النيل لنقل الأحجار<br>
- معرفة متقدمة بالرياضيات والهندسة`,
    "مصر في القرآن": `مصر في القرآن الكريم:<br><br>
📖 <strong>الذكر الصريح (4 مواضع):</strong><br>
1. "وَقَالَ الَّذِي اشْتَرَاهُ مِن مِّصْرَ لِامْرَأَتِهِ" (يوسف: 21)<br>
2. "ادْخُلُوا مِصْرَ إِن شَاءَ اللَّهُ آمِنِينَ" (يوسف: 99)<br>
3. "أَلَيْسَ لِي مُلْكُ مِصْرَ" (الزخرف: 51)<br>
4. "أَن تَبَوَّآ لِقَوْمِكُمَا بِمِصْرَ بُيُوتًا" (يونس: 87)<br><br>
✨ <strong>فضائل مصر:</strong><br>
- وصفها الله بأنها "خزائن الأرض"<br>
- مأوى الأنبياء: إبراهيم، يوسف، موسى، عيسى<br>
- أشار إليها في 30+ موضع<br>
- "رَبْوَةٍ ذَاتِ قَرَارٍ وَمَعِينٍ" (المؤمنون: 50)<br><br>
🕌 <strong>في السنة النبوية:</strong><br>
"إنكم ستفتحون مصر، فأحسنوا إلى أهلها؛ فإن لهم ذمة ورحماً" (صحيح مسلم)<br><br>
💡 <strong>حفظ الله لفرعون:</strong><br>
"فَالْيَوْمَ نُنَجِّيكَ بِبَدَنِكَ لِتَكُونَ لِمَنْ خَلْفَكَ آيَةً" (يونس: 92)<br>
وفعلاً تم اكتشاف مومياء رمسيس الثاني محفوظة!`,
    "استراتيجية مصر للذكاء الاصطناعي": `استراتيجية مصر الوطنية للذكاء الاصطناعي 2025-2030:<br><br>
🎯 <strong>الأهداف الرئيسية:</strong><br>
- تدريب 30,000 متخصص في الذكاء الاصطناعي<br>
- دعم 250 شركة ناشئة في مجال الذكاء الاصطناعي<br>
- تحقيق الريادة الإقليمية في تكنولوجيا الذكاء الاصطناعي<br><br>
🏛️ <strong>الركائز الأربع:</strong><br>
1. <strong>الحوكمة والتمكين:</strong> إطار قانوني ومؤسسي ومرصد وطني<br>
2. <strong>البحث العلمي والمواهب:</strong> تحديث المناهج ومراكز بحثية ومنح دراسية<br>
3. <strong>التطوير الاقتصادي:</strong> الزراعة الذكية، الصحة الرقمية، التصنيع الذكي، اللوجستيات<br>
4. <strong>التعاون الدولي:</strong> الحوكمة العالمية وشراكات أفريقية وعربية<br><br>
🌟 <strong>الإنجازات:</strong><br>
- التصوير الطبي بالذكاء الاصطناعي<br>
- أنظمة الري الذكية<br>
- الخدمات الحكومية الرقمية<br>
- حفظ التراث الأثري رقمياً<br><br>
📅 <strong>الفعاليات:</strong><br>
استضافة قمة Ai Everything MEA 2026`,
    "الطب الفرعوني": `الطب في مصر القديمة:<br><br>
🏥 <strong>الإنجازات الطبية:</strong><br>
- أول من مارس الجراحة المعقدة<br>
- معرفة بتشريح جسم الإنسان (التحنيط)<br>
- علاج كسور العظام والجروح<br>
- جراحة الأسنان ومعالجة التجاويف<br><br>
📜 <strong>البرديات الطبية:</strong><br>
- بردية إدوين سميث: 48 حالة جراحية<br>
- بردية إيبرس: 700+ وصفة طبية<br>
- بردية هيرست: أمراض النساء<br>
- بردية برلين: أمراض القلب والأوعية<br><br>
💊 <strong>الأدوية المستخدمة:</strong><br>
- العسل كمطهر ومضاد حيوي طبيعي<br>
- الصفصاف (مصدر الأسبرين)<br>
- الثوم والبصل<br><br>
🔬 <strong>أدوات جراحية:</strong><br>
- مشارط معدنية<br>
- مثاقب أسنان<br>
- ملاقط وإبر خياطة<br>
- أدوات كي الجروح`,
    "الهيروغليفية": `الكتابة الهيروغليفية:<br><br>
✍️ <strong>التاريخ:</strong><br>
- نشأت حوالي 3200 قبل الميلاد<br>
- من أقدم أنظمة الكتابة في العالم<br>
- استمرت لأكثر من 3000 عام<br><br>
📝 <strong>الخصائص:</strong><br>
- تجمع بين الصور الرمزية والصوتيات<br>
- تُكتب من اليمين لليسار أو العكس<br><br>
🗿 <strong>حجر رشيد:</strong><br>
- اكتُشف عام 1799<br>
- يحتوي على 3 لغات: هيروغليفية، ديموطيقية، يونانية<br>
- فك شامبليون رموزه عام 1822<br>
- مفتاح فهم الحضارة المصرية القديمة<br><br>
💎 <strong>الاستخدامات:</strong><br>
- النقوش الدينية في المعابد<br>
- الكتابات الملكية<br>
- السجلات الإدارية<br>
- الأدب والشعر`,
    "التقويم المصري": `التقويم المصري القديم:<br><br>
📅 <strong>التقويم الشمسي:</strong><br>
- 365 يوماً في السنة<br>
- 12 شهراً × 30 يوماً<br>
- 5 أيام إضافية (الأيام الإيباجومينالية)<br>
- أساس التقويم الحديث<br><br>
🌟 <strong>التقويم النجمي:</strong><br>
- بناءً على نجم الشعرى اليمانية (سيريوس)<br>
- يتزامن مع فيضان النيل<br><br>
🌾 <strong>الفصول الثلاثة:</strong><br>
1. <strong>أخت</strong> (الفيضان): يوليو - نوفمبر<br>
2. <strong>بيريت</strong> (النمو): نوفمبر - مارس<br>
3. <strong>شيمو</strong> (الحصاد): مارس - يوليو<br>`,
    "عصور مصر": `العصور التاريخية لمصر:<br><br>
🏺 <strong>مصر القديمة:</strong><br>
- العصر العتيق (3100-2686 ق.م)<br>
- الدولة القديمة (2686-2181 ق.م)<br>
- الدولة الوسطى (2055-1650 ق.م)<br>
- الدولة الحديثة (1550-1077 ق.م)<br><br>
⚔️ <strong>العصور الوسطى:</strong><br>
- العصر البطلمي والروماني والقبطي<br>
- الفتح الإسلامي (641 م)<br><br>
🕌 <strong>العصر الإسلامي:</strong><br>
- الدول: الفاطمية والمماليك والعثمانية<br><br>
🆕 <strong>العصر الحديث:</strong><br>
- عصر محمد علي<br>
- الجمهورية<br>
- الثورة الرقمية والذكاء الاصطناعي`
};

// دالة لمطابقة السؤال مع قاعدة المعرفة
function findAnswer(question) {
    question = question.trim().toLowerCase();
    for (let key in knowledgeBase) {
        if (question.includes(key.toLowerCase()) || 
            key.toLowerCase().includes(question) ||
            checkKeywords(question, key)) {
            return knowledgeBase[key];
        }
    }
    if (question.includes('فرعون') || question.includes('فراعنة')) {
        return knowledgeBase["أهم إنجازات الفراعنة"];
    } else if (question.includes('هرم') || question.includes('أهرام')) {
        return knowledgeBase["بناء الأهرامات"];
    } else if (question.includes('قرآن') || question.includes('إسلام') || question.includes('دين')) {
        return knowledgeBase["مصر في القرآن"];
    } else if (question.includes('ذكاء') || question.includes('تكنولوجيا') || question.includes('حديث')) {
        return knowledgeBase["استراتيجية مصر للذكاء الاصطناعي"];
    } else if (question.includes('طب') || question.includes('علاج') || question.includes('صحة')) {
        return knowledgeBase["الطب الفرعوني"];
    } else if (question.includes('كتابة') || question.includes('هيروغليفية') || question.includes('حجر رشيد')) {
        return knowledgeBase["الهيروغليفية"];
    } else if (question.includes('تقويم') || question.includes('تاريخ') || question.includes('سنة')) {
        return knowledgeBase["التقويم المصري"];
    } else if (question.includes('عصر') || question.includes('تاريخ مصر') || question.includes('فترة')) {
        return knowledgeBase["عصور مصر"];
    }
    // إجابة افتراضية
    return `شكراً لسؤالك!<br><br>
🔍 يمكنني مساعدتك في المواضيع التالية:<br>
• <strong>الحضارة الفرعونية:</strong> إنجازاتهم في الهندسة، الطب، الفلك، الرياضيات<br>
• <strong>بناء الأهرامات:</strong> كيفية البناء والدلائل التاريخية<br>
• <strong>مصر في القرآن:</strong> الآيات والأحاديث التي ذكرت مصر<br>
• <strong>الطب المصري القديم:</strong> البرديات الطبية والعلاجات<br>
• <strong>الكتابة الهيروغليفية:</strong> تاريخها وفك رموزها<br>
• <strong>التقويم المصري:</strong> النظام الزمني والفلكي<br>
• <strong>الذكاء الاصطناعي:</strong> استراتيجية مصر الحديثة<br>
• <strong>العصور التاريخية:</strong> من الفراعنة حتى اليوم<br><br>
💡 اطرح موضوعاً أو سؤالاً محدداً!`;
}

// دالة للتحقق من الكلمات المفتاحية
function checkKeywords(question, key) {
    const keywords = {
        "أهم إنجازات الفراعنة": ["إنجاز", "تطور", "علم", "حضارة", "ماذا", "منجزات"],
        "بناء الأهرامات": ["كيف", "بناء", "بنوا", "طريقة", "أسلوب"],
        "مصر في القرآن": ["قرآن", "آية", "سورة", "إسلام", "حديث", "نبوية"],
        "استراتيجية مصر للذكاء الاصطناعي": ["ذكاء", "اصطناعي", "تكنولوجيا", "مستقبل", "رقمي", "2025"]
    };
    if (keywords[key]) {
        return keywords[key].some(keyword => question.includes(keyword));
    }
    return false;
}

// دالة لإرسال الرسالة
function sendMessage() {
    const input = document.getElementById('userInput');
    const question = input.value.trim();
    if (!question) return;
    addMessage(question, 'user');
    input.value = '';
    setTimeout(() => {
        const answer = findAnswer(question);
        addMessage(answer, 'bot');
    }, 500);
}

// دالة لإضافة رسالة إلى الشات
function addMessage(text, sender) {
    const messagesContainer = document.getElementById('chatMessages');
    const welcomeMsg = messagesContainer.querySelector('.welcome-message');
    if (welcomeMsg && sender === 'user') {
        welcomeMsg.remove();
    }
    const messageDiv = document.createElement('div');
    messageDiv.className = `message ${sender}-message`;
    messageDiv.innerHTML = text;
    messagesContainer.appendChild(messageDiv);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
}

// دالة لطرح سؤال سريع
function askQuestion(question) {
    document.getElementById('userInput').value = question;
    sendMessage();
}

// إضافة مستمع لحدث الضغط على Enter
document.addEventListener('DOMContentLoaded', function() {
    const input = document.getElementById('userInput');
    if (input) {
        input.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    }
    // تأثيرات التمرير للأقسام
    const sections = document.querySelectorAll('.section');
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
    };
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    sections.forEach(section => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(30px)';
        section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(section);
    });
    // تمرير سلس لروابط التنقل
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const targetId = this.getAttribute('href').substring(1);
            scrollToSection(targetId);
        });
    });
});

// ===== تحديث النافذة عند التمرير =====
window.addEventListener('scroll', function() {
    const navbar = document.querySelector('.navbar');
    if (window.scrollY > 100) {
        navbar.style.background = 'rgba(26, 26, 46, 0.95)';
        navbar.style.backdropFilter = 'blur(10px)';
    } else {
        navbar.style.background = 'transparent';
        navbar.style.backdropFilter = 'none';
    }
});

console.log('🏛️ موقع كنوز النيل - تم التحميل بنجاح!');
console.log('📚 قاعدة المعرفة جاهزة للإجابة على أسئلتك');
